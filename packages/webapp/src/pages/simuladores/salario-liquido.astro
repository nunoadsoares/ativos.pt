---
import BaseLayout from '~/layouts/BaseLayout.astro';
import CalculadoraSalarioLiquido from '~/components/CalculadoraSalarioLiquido.jsx';

// CORREÇÃO: FAQ atualizada para refletir as funcionalidades da calculadora final
const faqItems = [
    {
        question: "O que é o salário líquido?",
        answer: "O salário líquido é o valor que o trabalhador recebe no final do mês, ou seja, após todos os descontos legais e obrigatórios sobre o salário bruto, como a Segurança Social, e o IRS (retenção na fonte). É o montante efetivamente transferido para a conta bancária todos os meses."
    },
    {
        question: "Como funciona o cálculo para Trabalhadores Independentes?",
        answer: "Ao selecionar 'Recibos Verdes', o simulador faz uma estimativa para o regime simplificado. Calcula a contribuição para a Segurança Social aplicando a taxa de 21.4% sobre 70% do Vencimento Base. Este cálculo não considera isenções ou o regime de contabilidade organizada."
    },
    {
        question: "Posso alterar a taxa da Segurança Social?",
        answer: "Sim. Para trabalhadores por conta de outrem, o campo 'Taxa de Segurança Social (%)' aparece. Embora o valor padrão seja 11%, pode alterá-lo para simular regimes especiais ou exceções."
    },
    {
        question: "O que são os diferentes campos de rendimento?",
        answer: "O simulador permite detalhar os seus rendimentos: 'Vencimento Base' é o seu salário contratual. 'Retribuição Extraordinária' refere-se a pagamentos com retenção autónoma (ex: subsídios pagos fora do vencimento). Os outros campos permitem adicionar rendimentos extra, especificando se estão sujeitos a SS e IRS, ou apenas a IRS."
    }
];

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqItems.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
};
---
<BaseLayout 
  title="Simulador de Salário Líquido 2025 (Avançado)"
  description="Calcule o seu salário líquido em Portugal com a ferramenta mais completa. Simula IRS Jovem, Recibos Verdes, duodécimos, subsídio de alimentação e mais."
>
  <Fragment slot="head">
    <script type="application/ld+json" is:inline set:html={JSON.stringify(faqSchema)} />
  </Fragment>

  <div class="py-12 md:py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white tracking-tight">
                Simulador Avançado de Salário Líquido 2025
            </h1>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600 dark:text-gray-300">
                A ferramenta mais completa para calcular o seu ordenado líquido em Portugal. Simule o seu caso, incluindo <strong class="text-primary">IRS Jovem</strong>, <strong class="text-primary">duodécimos</strong> e <strong class="text-primary">subsídio de alimentação</strong>.
            </p>
        </div>

        <CalculadoraSalarioLiquido client:load />

        <div class="max-w-4xl mx-auto mt-16">
            <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white">Perguntas Frequentes</h2>
            <div class="mt-8 space-y-4">
                {faqItems.map(faq => (
                <details class="group bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700 cursor-pointer">
                    <summary class="flex items-center justify-between font-medium text-gray-900 dark:text-white">
                    {faq.question}
                    <svg class="h-6 w-6 text-gray-500 group-open:rotate-180 transition-transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 dark:text-gray-300">{faq.answer}</p>
                </details>
                ))}
            </div>
        </div>
    </div>
  </div>

  <style is:global>
    .input-field {
      @apply block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary;
    }
  </style>
</BaseLayout>
