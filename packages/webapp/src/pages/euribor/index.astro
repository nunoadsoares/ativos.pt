---
import BaseLayout from '~/layouts/BaseLayout.astro';
import CheckboxCard from '~/components/CheckboxCard.astro';

const periods = [
  { label: 'Euribor 3M',  value: 'quota3m' },
  { label: 'Euribor 6M',  value: 'quota6m' },
  { label: 'Euribor 12M', value: 'quota12m' },
];
const canonical = new URL('/euribor', Astro.site!).href;
---

<BaseLayout
  title="Comparador Euribor"
  description="Escolhe até 3 prazos da Euribor (3M, 6M, 12M) para comparar quotas de novos créditos."
>
  <Fragment slot="head">
    <link rel="canonical" href={canonical} />
  </Fragment>

  <article class="max-w-4xl mx-auto py-12 px-4 text-center">
    <h1 class="text-4xl md:text-6xl font-extrabold mb-8">Comparador Euribor</h1>
    <p class="text-gray-600 dark:text-gray-400 mb-10">
      Seleciona até 3 prazos para comparar a quota de novos créditos indexados.
    </p>

    <form id="euribor-form" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
      {periods.map(p => (
        <CheckboxCard value={p.value} label={p.label} />
      ))}
    </form>

    <button
      id="compare-btn"
      class="bg-primary text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition"
    >
      Comparar
    </button>
  </article>

  <script is:inline>
    const form = document.getElementById('euribor-form');
    const btn  = document.getElementById('compare-btn');
    btn.addEventListener('click', e => {
      e.preventDefault();
      const sel = [...form.querySelectorAll('input[type="checkbox"]:checked')].map(i => i.value);
      if (sel.length < 1) { alert('Seleciona pelo menos 1 prazo.'); return; }
      if (sel.length > 3) { alert('Máximo 3 prazos.'); return; }
      window.location.href = `/euribor/${sel.join('-vs-')}`;
    });
  </script>
</BaseLayout>
